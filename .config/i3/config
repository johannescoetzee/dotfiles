# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

########## KEY BINDINGS ##########
set $mod Mod4

set $key_ws0 semicolon
set $key_ws1 comma
set $key_ws2 period
set $key_ws3 p
set $key_ws4 y

set $key_ws5 f
set $key_ws6 g
set $key_ws7 c
set $key_ws8 r
set $key_ws9 l

set $key_lstack a
set $key_ltab   o
set $key_lsplit e
set $key_fs_tog u
set $key_sp_hor i

set $key_sp_ver d
set $key_left   h
set $key_down   t
set $key_up     n
set $key_right  s

set $key_reload  apostrophe
set $key_exit    q
set $key_kill    j
set $key_browser k
set $key_lock    x

set $key_parent b
set $key_term   m
set $key_rofi   w
set $key_resize v
# placeholder z

set $key_float space

# Resize mode
set $key_shrink_w    h
set $key_shrink_h    t
set $key_grow_h      n
set $key_grow_w      s
########## END KEY BINDINGS ##########


########## WORKSPACE CONFIG ##########
set $ws0 "0"
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
########## END WORKSPACE CONFIG ##########


########## GENERAL CONFIG ##########
font pango:monospace 8
set $refresh_i3status killall -SIGUSR1 i3status

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# i3 gaps config
for_window[class=".*"] border pixel 3
# gaps inner 10

set $nagbar "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
########## END GENERAL CONFIG ##########


########## STARTUP CONFIG ##########
exec_always --no-startup-id hsetroot -solid "#0c0016"
exec --no-startup-id drata-agent
exec --no-startup-id xautolock -time 15 -corners "--++" -cornerdelay 1 -cornerredelay 1 -locker "i3lock -n -c 000000"
exec --no-startup-id picom --backend glx --experimental-backends --xrender-sync-fence
exec --no-startup-id dunst
exec --no-startup-id udiskie
exec --no-startup-id /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 &
# Temporarily disable to test change to /etc/X11/xinit/xserverrc
# exec --no-startup-id xset r rate 250 50

exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
exec --no-startup-id nm-applet
########## END STARTUP CONFIG ##########


########## DEFAULT SYMBOL BINDINGS ##########
# switch to workspace
bindsym $mod+$key_ws0 workspace number $ws0
bindsym $mod+$key_ws1 workspace number $ws1
bindsym $mod+$key_ws2 workspace number $ws2
bindsym $mod+$key_ws3 workspace number $ws3
bindsym $mod+$key_ws4 workspace number $ws4
bindsym $mod+$key_ws5 workspace number $ws5
bindsym $mod+$key_ws6 workspace number $ws6
bindsym $mod+$key_ws7 workspace number $ws7
bindsym $mod+$key_ws8 workspace number $ws8
bindsym $mod+$key_ws9 workspace number $ws9
# move focused container to workspace
bindsym $mod+Shift+$key_ws0 move container to workspace number $ws0
bindsym $mod+Shift+$key_ws1 move container to workspace number $ws1
bindsym $mod+Shift+$key_ws2 move container to workspace number $ws2
bindsym $mod+Shift+$key_ws3 move container to workspace number $ws3
bindsym $mod+Shift+$key_ws4 move container to workspace number $ws4
bindsym $mod+Shift+$key_ws5 move container to workspace number $ws5
bindsym $mod+Shift+$key_ws6 move container to workspace number $ws6
bindsym $mod+Shift+$key_ws7 move container to workspace number $ws7
bindsym $mod+Shift+$key_ws8 move container to workspace number $ws8
bindsym $mod+Shift+$key_ws9 move container to workspace number $ws9
# extra bindings for Kyria shift key overrides
bindsym $mod+slash      move container to workspace number $ws1
bindsym $mod+underscore move container to workspace number $ws2

# layout toggles
bindsym $mod+$key_lstack layout stacking
bindsym $mod+$key_ltab   layout tabbed
bindsym $mod+$key_lsplit layout toggle split
bindsym $mod+$key_fs_tog fullscreen toggle

# split toggles
bindsym $mod+$key_sp_hor split horizontal
bindsym $mod+$key_sp_ver split vertical

# container navigation
bindsym $mod+$key_left  focus left
bindsym $mod+$key_down  focus down
bindsym $mod+$key_up    focus up
bindsym $mod+$key_right focus right

bindsym $mod+Shift+$key_left  move left
bindsym $mod+Shift+$key_down  move down
bindsym $mod+Shift+$key_up    move up
bindsym $mod+Shift+$key_right move right

bindsym $mod+$key_reload  reload
bindsym $mod+$key_exit    exec $nagbar
bindsym $mod+$key_kill    kill
bindsym $mod+$key_browser exec firefox
bindsym $mod+$key_lock    exec xautolock -locknow
# Reload more than restart, so this doesn't need a separate key.
bindsym $mod+Shift+$key_reload restart

bindsym $mod+$key_parent focus parent
bindsym $mod+$key_term   exec TERMINAL=kitty i3-sensible-terminal
bindsym $mod+$key_rofi   exec rofi -show run -theme Arc-Dark
bindsym $mod+$key_resize mode "resize"

# change focus between tiling / floating windows
bindsym $mod+$key_float focus mode_toggle
# toggle tiling / floating
bindsym $mod+Shift+$key_float floating toggle

# Media and misc bindings
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status
bindsym XF86MonBrightnessUp exec light -A 10
bindsym XF86MonBrightnessDown exec light -U 10
########## END DEFAULT SYMBOL BINDINGS ##########


########## RESIZE SYM BINDINGS ##########
mode "resize" {
        bindsym $key_shrink_w resize shrink width 10 px or 10 ppt
        bindsym $key_shrink_h resize shrink height 10 px or 10 ppt
        bindsym $key_grow_h   resize grow height 10 px or 10 ppt
        bindsym $key_grow_w   resize grow width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
########## END RESIZE SYM BINDINGS ##########


########## FLOAT CONFIG ##########
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [class="yakuake"] floating enable
for_window [class="pavucontrol"] floating enable
for_window [class="systemsettings"] floating enable
for_window [class="plasmashell"] floating enable;
for_window [class="Plasma"] floating enable; border none
for_window [title="plasma-desktop"] floating enable; border none
for_window [title="win7"] floating enable; border none
for_window [class="krunner"] floating enable; border none
for_window [class="Kmix"] floating enable; border none
for_window [class="Klipper"] floating enable; border none
for_window [class="Plasmoidviewer"] floating enable; border none
for_window [class="(?i)*nextcloud*"] floating disable
for_window [class="plasmashell" window_type="notification"] border none, move right 700px, move down 450px
no_focus [class="plasmashell" window_type="notification"]
for_window [title="Desktop â€” Plasma"] kill; floating enable; border none
########## END FLOAT CONFIG ##########


########## BAR CONFIG ##########
bar {
    status_command i3status
    position top
    font pango:FiraCode 10
    colors {
        background #0c0016
    }
}
########## END BAR CONFIG ##########
